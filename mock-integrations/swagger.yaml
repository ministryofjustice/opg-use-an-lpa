paths:
  /use-an-lpa/lpas/{uid}:
    get:
      responses:
        '200':
          content:
            application/json:
              examples:
                lpa0047:
                  value:
                    - uId: 7000-0000-0047
                      applicationHasGuidance: false
                      applicationHasRestrictions: false
                      applicationType: Classic
                      attorneyActDecisions: null
                      attorneys:
                        - addresses:
                            - addressLine1: 9 High Street
                              addressLine2: ""
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 9
                              postcode: B89 7JK
                              town: Leafland
                              type: Primary
                          companyName: ""
                          dob: "1990-05-04"
                          email: ""
                          firstname: Jean
                          id: 9
                          middlenames: ""
                          salutation: ""
                          surname: Sanderson
                          systemStatus: true
                          uId: 7000-0000-0815
                        - addresses:
                            - addressLine1: 7 The Low Street
                              addressLine2: ""
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 12
                              postcode: WR1 1EK
                              town: Worcester
                              type: Primary
                          companyName: ""
                          dob: "1975-10-05"
                          email: XXXXX
                          firstname: Annette
                          id: 12
                          middlenames: ""
                          salutation: Mrs
                          surname: Doe
                          systemStatus: true
                          uId: 7000-0000-0849
                        - addresses:
                            - addressLine1: Home
                              addressLine2: ""
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 3174
                              postcode: N4 4DL
                              town: Home
                              type: Primary
                          companyName: null
                          dob: "2000-12-15"
                          email: null
                          firstname: Jess
                          id: 3453
                          middlenames: null
                          salutation: null
                          surname: Doe
                          systemStatus: true
                          uId: 7000-0015-0610
                      cancellationDate: null
                      caseAttorneyJointly: false
                      caseAttorneyJointlyAndJointlyAndSeverally: true
                      caseAttorneyJointlyAndSeverally: false
                      caseAttorneySingular: false
                      caseSubtype: hw
                      certificateProviders:
                        - addresses:
                            - addressLine1: 50 Fordham Rd
                              addressLine2: HADFIELD
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 11
                              postcode: SK14 0RH
                              town: ""
                              type: Primary
                          dob: null
                          email: null
                          firstname: Danielle
                          id: 11
                          middlenames: null
                          salutation: Miss
                          surname: Hart
                          uId: 7000-0000-0831
                      dispatchDate: "2021-04-26"
                      donor:
                        addresses:
                          - addressLine1: 81 Front Street
                            addressLine2: LACEBY
                            addressLine3: ""
                            country: ""
                            county: ""
                            id: 7
                            postcode: DN37 5SH
                            town: ""
                            type: Primary
                        companyName: null
                        dob: "1948-11-01"
                        email: RachelSanderson@opgtest.com
                        firstname: Rachel
                        id: 7
                        linked:
                          - id: 7
                            uId: 7000-0000-0799
                        middlenames: Emma
                        salutation: Mr
                        surname: Sanderson
                        uId: 7000-0000-0799
                      id: 2
                      invalidDate: null
                      lifeSustainingTreatment: Option A
                      lpaDonorSignatureDate: "2018-12-12"
                      lpaIsCleansed: false
                      onlineLpaId: A33718377316
                      receiptDate: "2014-09-26"
                      registrationDate: "2021-04-26"
                      rejectedDate: null
                      replacementAttorneys: []
                      status: Registered
                      statusDate: null
                      trustCorporations: []
                      withdrawnDate: null
                lpa0000:
                  value:
                    - uId: 7000-0000-0000
                      applicationHasGuidance: false
                      applicationHasRestrictions: false
                      applicationType: Classic
                      attorneyActDecisions: ""
                      attorneys:
                        - addresses:
                            - addressLine1: 9 High Street
                              addressLine2: ""
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 9
                              postcode: B89 7JK
                              town: Leafland
                              type: Primary
                          companyName: ""
                          dob: "1990-05-04"
                          email: ""
                          firstname: Jean
                          id: 9
                          middlenames: ""
                          salutation: ""
                          surname: Sanderson
                          systemStatus: true
                          uId: 7000-0000-0815
                        - addresses:
                            - addressLine1: 7 The Low Street
                              addressLine2: ""
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 12
                              postcode: WR1 1EK
                              town: Worcester
                              type: Primary
                          companyName: ""
                          dob: "1975-10-05"
                          email: XXXXX
                          firstname: Annette
                          id: 12
                          middlenames: ""
                          salutation: Mrs
                          surname: Doe
                          systemStatus: true
                          uId: 7000-0000-0849
                        - addresses:
                            - addressLine1: Home
                              addressLine2: ""
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 3174
                              postcode: N4 4DL
                              town: Home
                              type: Primary
                          companyName: ""
                          dob: "2000-12-15"
                          email: ""
                          firstname: Jess
                          id: 3453
                          middlenames: ""
                          salutation: ""
                          surname: Doe
                          systemStatus: true
                          uId: 7000-0015-0610
                      cancellationDate: ""
                      caseAttorneyJointly: false
                      caseAttorneyJointlyAndJointlyAndSeverally: true
                      caseAttorneyJointlyAndSeverally: false
                      caseAttorneySingular: false
                      caseSubtype: hw
                      certificateProviders:
                        - addresses:
                            - addressLine1: 50 Fordham Rd
                              addressLine2: HADFIELD
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 11
                              postcode: SK14 0RH
                              town: ""
                              type: Primary
                          dob: ""
                          email: ""
                          firstname: Danielle
                          id: 11
                          middlenames: ""
                          salutation: Miss
                          surname: Hart
                          uId: 7000-0000-0831
                      dispatchDate: "2021-04-26"
                      donor:
                        addresses:
                          - addressLine1: 81 Front Street
                            addressLine2: LACEBY
                            addressLine3: ""
                            country: ""
                            county: ""
                            id: 7
                            postcode: DN37 5SH
                            town: ""
                            type: Primary
                        companyName: ""
                        dob: "1948-11-01"
                        email: RachelSanderson@opgtest.com
                        firstname: Rachel
                        id: 7
                        linked:
                          - id: 7
                            uId: 7000-0000-0799
                        middlenames: Emma
                        salutation: Mr
                        surname: Sanderson
                        uId: 7000-0000-0799
                      id: 2
                      invalidDate: ""
                      lifeSustainingTreatment: Option A
                      lpaDonorSignatureDate: "2018-12-12"
                      lpaIsCleansed: false
                      onlineLpaId: A33718377316
                      receiptDate: "2014-09-26"
                      registrationDate: "2021-04-26"
                      rejectedDate: ""
                      replacementAttorneys: []
                      status: Registered
                      statusDate: ""
                      trustCorporations: []
                      withdrawnDate: ""
                meris3000000:
                  value:
                    - uId: 7000-0000-0000
                      applicationHasGuidance: false
                      applicationHasRestrictions: false
                      applicationType: Classic
                      attorneyActDecisions: ""
                      attorneys:
                        - addresses:
                            - addressLine1: 9 High Street
                              addressLine2: ""
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 9
                              postcode: B89 7JK
                              town: Leafland
                              type: Primary
                          companyName: ""
                          dob: "1990-05-04"
                          email: ""
                          firstname: Jean
                          id: 9
                          middlenames: ""
                          salutation: ""
                          surname: Sanderson
                          systemStatus: true
                          uId: 7000-0000-0815
                        - addresses:
                            - addressLine1: 7 The Low Street
                              addressLine2: ""
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 12
                              postcode: WR1 1EK
                              town: Worcester
                              type: Primary
                          companyName: ""
                          dob: "1975-10-05"
                          email: XXXXX
                          firstname: Annette
                          id: 12
                          middlenames: ""
                          salutation: Mrs
                          surname: Doe
                          systemStatus: true
                          uId: 7000-0000-0849
                        - addresses:
                            - addressLine1: Home
                              addressLine2: ""
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 3174
                              postcode: N4 4DL
                              town: Home
                              type: Primary
                          companyName: ""
                          dob: "2000-12-15"
                          email: ""
                          firstname: Jess
                          id: 3453
                          middlenames: ""
                          salutation: ""
                          surname: Doe
                          systemStatus: true
                          uId: 7000-0015-0610
                      cancellationDate: ""
                      caseAttorneyJointly: false
                      caseAttorneyJointlyAndJointlyAndSeverally: true
                      caseAttorneyJointlyAndSeverally: false
                      caseAttorneySingular: false
                      caseSubtype: hw
                      certificateProviders:
                        - addresses:
                            - addressLine1: 50 Fordham Rd
                              addressLine2: HADFIELD
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 11
                              postcode: SK14 0RH
                              town: ""
                              type: Primary
                          dob: ""
                          email: ""
                          firstname: Danielle
                          id: 11
                          middlenames: ""
                          salutation: Miss
                          surname: Hart
                          uId: 7000-0000-0831
                      dispatchDate: "2021-04-26"
                      donor:
                        addresses:
                          - addressLine1: 81 Front Street
                            addressLine2: LACEBY
                            addressLine3: ""
                            country: ""
                            county: ""
                            id: 7
                            postcode: DN37 5SH
                            town: ""
                            type: Primary
                        companyName: ""
                        dob: "1948-11-01"
                        email: RachelSanderson@opgtest.com
                        firstname: Rachel
                        id: 7
                        linked:
                          - id: 7
                            uId: 7000-0000-0799
                        middlenames: Emma
                        salutation: Mr
                        surname: Sanderson
                        uId: 7000-0000-0799
                      id: 2
                      invalidDate: ""
                      lifeSustainingTreatment: Option A
                      lpaDonorSignatureDate: "2018-12-12"
                      lpaIsCleansed: false
                      onlineLpaId: A33718377316
                      receiptDate: "2014-09-26"
                      registrationDate: "2021-04-26"
                      rejectedDate: ""
                      replacementAttorneys: []
                      status: Registered
                      statusDate: ""
                      trustCorporations: []
                      withdrawnDate: ""
                meris2000000:
                  value:
                    - uId: 7000-0000-0000
                      applicationHasGuidance: false
                      applicationHasRestrictions: false
                      applicationType: Classic
                      attorneyActDecisions: ""
                      attorneys:
                        - addresses:
                            - addressLine1: 9 High Street
                              addressLine2: ""
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 9
                              postcode: B89 7JK
                              town: Leafland
                              type: Primary
                          companyName: ""
                          dob: "1990-05-04"
                          email: ""
                          firstname: Jean
                          id: 9
                          middlenames: ""
                          salutation: ""
                          surname: Sanderson
                          systemStatus: true
                          uId: 7000-0000-0815
                        - addresses:
                            - addressLine1: 7 The Low Street
                              addressLine2: ""
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 12
                              postcode: WR1 1EK
                              town: Worcester
                              type: Primary
                          companyName: ""
                          dob: "1975-10-05"
                          email: XXXXX
                          firstname: Annette
                          id: 12
                          middlenames: ""
                          salutation: Mrs
                          surname: Doe
                          systemStatus: true
                          uId: 7000-0000-0849
                        - addresses:
                            - addressLine1: Home
                              addressLine2: ""
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 3174
                              postcode: N4 4DL
                              town: Home
                              type: Primary
                          companyName: ""
                          dob: "2000-12-15"
                          email: ""
                          firstname: Jess
                          id: 3453
                          middlenames: ""
                          salutation: ""
                          surname: Doe
                          systemStatus: true
                          uId: 7000-0015-0610
                      cancellationDate: ""
                      caseAttorneyJointly: false
                      caseAttorneyJointlyAndJointlyAndSeverally: true
                      caseAttorneyJointlyAndSeverally: false
                      caseAttorneySingular: false
                      caseSubtype: hw
                      certificateProviders:
                        - addresses:
                            - addressLine1: 50 Fordham Rd
                              addressLine2: HADFIELD
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 11
                              postcode: SK14 0RH
                              town: ""
                              type: Primary
                          dob: ""
                          email: ""
                          firstname: Danielle
                          id: 11
                          middlenames: ""
                          salutation: Miss
                          surname: Hart
                          uId: 7000-0000-0831
                      dispatchDate: "2021-04-26"
                      donor:
                        addresses:
                          - addressLine1: 81 Front Street
                            addressLine2: LACEBY
                            addressLine3: ""
                            country: ""
                            county: ""
                            id: 7
                            postcode: DN37 5SH
                            town: ""
                            type: Primary
                        companyName: ""
                        dob: "1948-11-01"
                        email: RachelSanderson@opgtest.com
                        firstname: Rachel
                        id: 7
                        linked:
                          - id: 7
                            uId: 7000-0000-0799
                        middlenames: Emma
                        salutation: Mr
                        surname: Sanderson
                        uId: 7000-0000-0799
                      id: 2
                      invalidDate: ""
                      lifeSustainingTreatment: Option A
                      lpaDonorSignatureDate: "2018-12-12"
                      lpaIsCleansed: false
                      onlineLpaId: A33718377316
                      receiptDate: "2014-09-26"
                      registrationDate: "2021-04-26"
                      rejectedDate: ""
                      replacementAttorneys: []
                      status: Registered
                      statusDate: ""
                      trustCorporations: []
                      withdrawnDate: ""
                    - uId: 7000-0000-0047
                      applicationHasGuidance: false
                      applicationHasRestrictions: false
                      applicationType: Classic
                      attorneyActDecisions: null
                      attorneys:
                        - addresses:
                            - addressLine1: 9 High Street
                              addressLine2: ""
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 9
                              postcode: B89 7JK
                              town: Leafland
                              type: Primary
                          companyName: ""
                          dob: "1990-05-04"
                          email: ""
                          firstname: Jean
                          id: 9
                          middlenames: ""
                          salutation: ""
                          surname: Sanderson
                          systemStatus: true
                          uId: 7000-0000-0815
                        - addresses:
                            - addressLine1: 7 The Low Street
                              addressLine2: ""
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 12
                              postcode: WR1 1EK
                              town: Worcester
                              type: Primary
                          companyName: ""
                          dob: "1975-10-05"
                          email: XXXXX
                          firstname: Annette
                          id: 12
                          middlenames: ""
                          salutation: Mrs
                          surname: Doe
                          systemStatus: true
                          uId: 7000-0000-0849
                        - addresses:
                            - addressLine1: Home
                              addressLine2: ""
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 3174
                              postcode: N4 4DL
                              town: Home
                              type: Primary
                          companyName: null
                          dob: "2000-12-15"
                          email: null
                          firstname: Jess
                          id: 3453
                          middlenames: null
                          salutation: null
                          surname: Doe
                          systemStatus: true
                          uId: 7000-0015-0610
                      cancellationDate: null
                      caseAttorneyJointly: false
                      caseAttorneyJointlyAndJointlyAndSeverally: true
                      caseAttorneyJointlyAndSeverally: false
                      caseAttorneySingular: false
                      caseSubtype: hw
                      certificateProviders:
                        - addresses:
                            - addressLine1: 50 Fordham Rd
                              addressLine2: HADFIELD
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 11
                              postcode: SK14 0RH
                              town: ""
                              type: Primary
                          dob: null
                          email: null
                          firstname: Danielle
                          id: 11
                          middlenames: null
                          salutation: Miss
                          surname: Hart
                          uId: 7000-0000-0831
                      dispatchDate: "2021-04-26"
                      donor:
                        addresses:
                          - addressLine1: 81 Front Street
                            addressLine2: LACEBY
                            addressLine3: ""
                            country: ""
                            county: ""
                            id: 7
                            postcode: DN37 5SH
                            town: ""
                            type: Primary
                        companyName: null
                        dob: "1948-11-01"
                        email: RachelSanderson@opgtest.com
                        firstname: Rachel
                        id: 7
                        linked:
                          - id: 7
                            uId: 7000-0000-0799
                        middlenames: Emma
                        salutation: Mr
                        surname: Sanderson
                        uId: 7000-0000-0799
                      id: 2
                      invalidDate: null
                      lifeSustainingTreatment: Option A
                      lpaDonorSignatureDate: "2018-12-12"
                      lpaIsCleansed: false
                      onlineLpaId: A33718377316
                      receiptDate: "2014-09-26"
                      registrationDate: "2021-04-26"
                      rejectedDate: null
                      replacementAttorneys: []
                      status: Registered
                      statusDate: null
                      trustCorporations: []
                      withdrawnDate: null
                lpa0138:
                  value:
                    - uId: 7000-0000-0138
                      applicationHasGuidance: true
                      applicationHasRestrictions: true
                      applicationType: Classic
                      attorneyActDecisions: null
                      attorneys:
                        - addresses:
                            - addressLine1: 22 Prospect Hill
                              addressLine2: DRONFIELD
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 25
                              postcode: S18 2BY
                              town: ""
                              type: Primary
                          companyName: ""
                          dob: "1975-10-05"
                          email: SimonMatthews@opgtest.com
                          firstname: Simon
                          id: 25
                          middlenames: ""
                          salutation: Mr
                          surname: Matthews
                          systemStatus: true
                          uId: 7000-0000-0997
                        - addresses:
                            - addressLine1: my house
                              addressLine2: ""
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 2397
                              postcode: ""
                              town: ""
                              type: Primary
                          companyName: ""
                          dob: "1990-03-17"
                          email: ""
                          firstname: Simone
                          id: 2588
                          middlenames: ""
                          salutation: Miss
                          surname: Matthews
                          systemStatus: true
                          uId: 7000-0011-6322
                        - addresses:
                            - addressLine1: Home
                              addressLine2: ""
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 3072
                              postcode: B90 1GD
                              town: Homeless
                              type: Primary
                          companyName: null
                          dob: "2000-05-14"
                          email: null
                          firstname: Doobie
                          id: 3352
                          middlenames: null
                          salutation: Mr
                          surname: Doo
                          systemStatus: true
                          uId: 7000-0014-6980
                        - addresses:
                            - addressLine1: Home
                              addressLine2: Home
                              addressLine3: Home
                              country: ""
                              county: ""
                              id: 3073
                              postcode: N4 4DL
                              town: Home
                              type: Primary
                          companyName: ""
                          dob: "1981-06-14"
                          email: null
                          firstname: David
                          id: 3353
                          middlenames: null
                          salutation: null
                          surname: Jones
                          systemStatus: true
                          uId: 7000-0014-7012
                        - addresses:
                            - addressLine1: 25 The High Street
                              addressLine2: ""
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 3077
                              postcode: B91 3DJ
                              town: Solihull
                              type: Primary
                          companyName: ""
                          dob: "1961-06-14"
                          email: null
                          firstname: Jane
                          id: 3357
                          middlenames: null
                          salutation: null
                          surname: Doe
                          systemStatus: true
                          uId: 7000-0014-7137
                        - addresses:
                            - addressLine1: 7 The Low Street
                              addressLine2: ""
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 3103
                              postcode: WR1 1EK
                              town: Worcester
                              type: Primary
                          companyName: null
                          dob: "1981-06-14"
                          email: null
                          firstname: Daisy
                          id: 3383
                          middlenames: null
                          salutation: null
                          surname: Brown
                          systemStatus: true
                          uId: 7000-0014-7947
                        - addresses:
                            - addressLine1: 115 Danford Lane
                              addressLine2: ""
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 3116
                              postcode: B91 1QG
                              town: Solihull
                              type: Primary
                          companyName: ""
                          dob: "1981-06-14"
                          email: null
                          firstname: Daisy
                          id: 3396
                          middlenames: null
                          salutation: null
                          surname: Chain
                          systemStatus: true
                          uId: 7000-0014-8515
                        - addresses:
                            - addressLine1: 1 test road
                              addressLine2: ""
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 3182
                              postcode: b1 1tf
                              town: ""
                              type: Primary
                          companyName: null
                          dob: "1989-01-01"
                          email: null
                          firstname: daniel's
                          id: 3460
                          middlenames: null
                          salutation: mr
                          surname: john
                          systemStatus: true
                          uId: 7000-0015-0974
                      cancellationDate: "2020-03-17"
                      caseAttorneyJointly: false
                      caseAttorneyJointlyAndJointlyAndSeverally: false
                      caseAttorneyJointlyAndSeverally: true
                      caseAttorneySingular: false
                      caseSubtype: hw
                      certificateProviders:
                        - addresses:
                            - addressLine1: 14 Bootham Crescent
                              addressLine2: RIECHIP
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 27
                              postcode: PH8 1UR
                              town: ""
                              type: Primary
                          dob: null
                          email: null
                          firstname: Joanne
                          id: 27
                          middlenames: null
                          salutation: Mrs
                          surname: Armstrong
                          uId: 7000-0000-1011
                      dispatchDate: "2021-10-14"
                      donor:
                        addresses:
                          - addressLine1: 24 Gloucester Road
                            addressLine2: CILLE BHRIGHDE
                            addressLine3: ""
                            country: ""
                            county: ""
                            id: 23
                            postcode: HS8 2YB
                            town: ""
                            type: Primary
                        companyName: null
                        dob: "1948-11-01"
                        email: babaragilson@opgtest.com
                        firstname: Babara
                        id: 23
                        linked:
                          - id: 23
                            uId: 7000-0000-0971
                        middlenames: Suzanne
                        salutation: Mrs
                        surname: Gilson
                        uId: 7000-0000-0971
                      id: 5
                      invalidDate: null
                      lifeSustainingTreatment: Option B
                      lpaDonorSignatureDate: "2016-01-01"
                      lpaIsCleansed: false
                      onlineLpaId: A15527329531
                      receiptDate: "2014-09-26"
                      registrationDate: "2020-05-15"
                      rejectedDate: null
                      replacementAttorneys: []
                      status: Registered
                      statusDate: null
                      trustCorporations: []
                      withdrawnDate: null
                lpa0252:
                  value:
                    - uId: 7000-0000-0252
                      applicationHasGuidance: true
                      applicationHasRestrictions: false
                      applicationType: Classic
                      attorneyActDecisions: null
                      attorneys:
                        - addresses:
                            - addressLine1: 29 Wressle Road
                              addressLine2: PLUSH
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 45
                              postcode: DT2 2SH
                              town: ""
                              type: Primary
                          companyName: ""
                          dob: "1975-10-05"
                          email: TainaRucker@opgtest.com
                          firstname: Taina
                          id: 45
                          middlenames: ""
                          salutation: Mr
                          surname: Rucker
                          systemStatus: false
                          uId: 7000-0000-1235
                      cancellationDate: "2020-02-03"
                      caseAttorneyJointly: false
                      caseAttorneyJointlyAndJointlyAndSeverally: false
                      caseAttorneyJointlyAndSeverally: true
                      caseAttorneySingular: false
                      caseSubtype: pfa
                      certificateProviders:
                        - addresses:
                            - addressLine1: 65 Moulton Road
                              addressLine2: GUY'S MARSH
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 47
                              postcode: SP7 1RD
                              town: ""
                              type: Primary
                          dob: null
                          email: null
                          firstname: Desire
                          id: 47
                          middlenames: null
                          salutation: Miss
                          surname: Beasley
                          uId: 7000-0000-1250
                      dispatchDate: null
                      donor:
                        addresses:
                          - addressLine1: 26 Traill Street
                            addressLine2: ROSE GREEN
                            addressLine3: ""
                            country: ""
                            county: ""
                            id: 43
                            postcode: CO6 2XT
                            town: ""
                            type: Primary
                        companyName: null
                        dob: "1948-11-01"
                        email: orethalang@opgtest.com
                        firstname: Babara
                        id: 43
                        linked:
                          - id: 43
                            uId: 7000-0000-1219
                        middlenames: Suzanne
                        salutation: ""
                        surname: Gilson
                        uId: 7000-0000-1219
                      id: 9
                      invalidDate: null
                      lifeSustainingTreatment: Option B
                      lpaDonorSignatureDate: "2019-10-05"
                      lpaIsCleansed: false
                      onlineLpaId: A48218451245
                      receiptDate: "2014-09-26"
                      registrationDate: null
                      rejectedDate: null
                      replacementAttorneys: []
                      status: Cancelled
                      statusDate: null
                      trustCorporations: []
                      withdrawnDate: null
                lpa0344:
                  value:
                    - uId: 7000-0000-0344
                      applicationHasGuidance: false
                      applicationHasRestrictions: false
                      applicationType: Classic
                      attorneyActDecisions: null
                      attorneys:
                        - addresses:
                            - addressLine1: 50 Hull Road
                              addressLine2: PAR
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 64
                              postcode: PL24 9DQ
                              town: ""
                              type: Primary
                          companyName: null
                          dob: "1975-10-05"
                          email: SimonMatthews@opgtest.com
                          firstname: Simon
                          id: 64
                          middlenames: null
                          salutation: Mr
                          surname: Matthews
                          systemStatus: true
                          uId: 7000-0000-1441
                        - addresses:
                            - addressLine1: 1 Use Lane
                              addressLine2: ""
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 2808
                              postcode: ""
                              town: ""
                              type: Primary
                          companyName: null
                          dob: "1975-10-05"
                          email: null
                          firstname: simone
                          id: 3022
                          middlenames: null
                          salutation: miss
                          surname: matthews
                          systemStatus: true
                          uId: 7000-0013-6098
                      cancellationDate: null
                      caseAttorneyJointly: false
                      caseAttorneyJointlyAndJointlyAndSeverally: false
                      caseAttorneyJointlyAndSeverally: true
                      caseAttorneySingular: false
                      caseSubtype: pfa
                      certificateProviders:
                        - addresses:
                            - addressLine1: 69 Felix Lane
                              addressLine2: SHUSTOKE
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 63
                              postcode: B46 7EY
                              town: ""
                              type: Primary
                          dob: null
                          email: null
                          firstname: David
                          id: 63
                          middlenames: null
                          salutation: Mr
                          surname: Stewart
                          uId: 7000-0000-1433
                      dispatchDate: null
                      donor:
                        addresses:
                          - addressLine1: 71 Withers Close
                            addressLine2: ALLATHASDAL
                            addressLine3: ""
                            country: ""
                            county: ""
                            id: 53
                            postcode: HS9 2PN
                            town: ""
                            type: Primary
                        companyName: null
                        dob: "1948-11-01"
                        email: linkedpersonone@opgtest.com
                        firstname: Linked
                        id: 53
                        linked:
                          - id: 53
                            uId: 7000-0000-1334
                          - id: 59
                            uId: 7000-0000-1391
                          - id: 98
                            uId: 7000-0000-1813
                          - id: 110
                            uId: 7000-0000-1938
                        middlenames: Person
                        salutation: Mr
                        surname: One
                        uId: 7000-0000-1334
                      id: 12
                      invalidDate: null
                      lifeSustainingTreatment: null
                      lpaDonorSignatureDate: "2015-10-06"
                      lpaIsCleansed: false
                      onlineLpaId: null
                      receiptDate: "2014-09-26"
                      registrationDate: "2020-06-10"
                      rejectedDate: null
                      replacementAttorneys: []
                      status: Registered
                      statusDate: null
                      trustCorporations: []
                      withdrawnDate: null
                lpa0435:
                  value:
                    - uId: 7000-0000-0435
                      applicationHasGuidance: false
                      applicationHasRestrictions: false
                      applicationType: Classic
                      attorneyActDecisions: null
                      attorneys:
                        - addresses:
                            - addressLine1: 13 Union Terrace
                              addressLine2: LOGIE PERT
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 78
                              postcode: DD10 4TB
                              town: ""
                              type: Primary
                          companyName: null
                          dob: "1975-10-05"
                          email: AndreaRobinson@opgtest.com
                          firstname: Andrea
                          id: 78
                          middlenames: null
                          salutation: Mrs
                          surname: Robinson
                          systemStatus: true
                          uId: 7000-0000-1599
                      cancellationDate: null
                      caseAttorneyJointly: false
                      caseAttorneyJointlyAndJointlyAndSeverally: false
                      caseAttorneyJointlyAndSeverally: true
                      caseAttorneySingular: false
                      caseSubtype: pfa
                      certificateProviders:
                        - addresses:
                            - addressLine1: 81 Front Street
                              addressLine2: LACEBY
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 80
                              postcode: DN37 5SH
                              town: ""
                              type: Primary
                          dob: null
                          email: null
                          firstname: Rachel
                          id: 80
                          middlenames: null
                          salutation: Mrs
                          surname: Sanderson
                          uId: 7000-0000-1615
                      dispatchDate: "2022-02-17"
                      donor:
                        addresses:
                          - addressLine1: 16 Wade Lane
                            addressLine2: SALTWICK
                            addressLine3: ""
                            country: ""
                            county: ""
                            id: 76
                            postcode: NE20 3PN
                            town: ""
                            type: Primary
                        companyName: null
                        dob: "1948-11-01"
                        email: demtriceflood@opgtest.com
                        firstname: Demetrice
                        id: 76
                        linked:
                          - id: 76
                            uId: 7000-0000-1573
                        middlenames: Ophelia
                        salutation: Mrs
                        surname: Flood
                        uId: 7000-0000-1573
                      id: 15
                      invalidDate: null
                      lifeSustainingTreatment: null
                      lpaDonorSignatureDate: "2019-10-02"
                      lpaIsCleansed: false
                      onlineLpaId: A26997335988
                      receiptDate: "2014-09-26"
                      registrationDate: "2022-01-17"
                      rejectedDate: null
                      replacementAttorneys: []
                      status: Registered
                      statusDate: "2022-01-17"
                      trustCorporations: []
                      withdrawnDate: null
                lpa0526:
                  value:
                    - uId: 7000-0000-0526
                      applicationHasGuidance: false
                      applicationHasRestrictions: false
                      applicationType: Classic
                      attorneyActDecisions: null
                      attorneys:
                        - addresses:
                            - addressLine1: 50 Hull Road
                              addressLine2: PAR
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 97
                              postcode: PL24 9DQ
                              town: ""
                              type: Primary
                          companyName: null
                          dob: "1975-10-05"
                          email: SimonMatthews@opgtest.com
                          firstname: Simon
                          id: 97
                          middlenames: null
                          salutation: Mr
                          surname: Matthews
                          systemStatus: true
                          uId: 7000-0000-1805
                      cancellationDate: null
                      caseAttorneyJointly: false
                      caseAttorneyJointlyAndJointlyAndSeverally: true
                      caseAttorneyJointlyAndSeverally: false
                      caseAttorneySingular: false
                      caseSubtype: pfa
                      certificateProviders:
                        - addresses:
                            - addressLine1: 69 Felix Lane
                              addressLine2: SHUSTOKE
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 96
                              postcode: B46 7EY
                              town: ""
                              type: Primary
                          dob: null
                          email: null
                          firstname: David
                          id: 96
                          middlenames: null
                          salutation: Mr
                          surname: Stewart
                          uId: 7000-0000-1797
                      dispatchDate: null
                      donor:
                        addresses:
                          - addressLine1: 71 Withers Close
                            addressLine2: ALLATHASDAL
                            addressLine3: ""
                            country: ""
                            county: ""
                            id: 92
                            postcode: HS9 2PN
                            town: ""
                            type: Primary
                        companyName: null
                        dob: "1948-11-01"
                        email: cherrylschindler@opgtest.com
                        firstname: Cherryl
                        id: 92
                        linked:
                          - id: 92
                            uId: 7000-0000-1755
                        middlenames: Marie
                        salutation: Ms
                        surname: Schindler
                        uId: 7000-0000-1755
                      id: 18
                      invalidDate: null
                      lifeSustainingTreatment: Option A
                      lpaDonorSignatureDate: "2012-12-12"
                      lpaIsCleansed: false
                      onlineLpaId: A13316443118
                      receiptDate: "2014-09-26"
                      registrationDate: null
                      rejectedDate: null
                      replacementAttorneys: []
                      status: Pending
                      statusDate: null
                      trustCorporations: []
                      withdrawnDate: null
                lpa0617:
                  value:
                    - uId: 7000-0000-0617
                      applicationHasGuidance: false
                      applicationHasRestrictions: false
                      applicationType: Classic
                      attorneyActDecisions: null
                      attorneys:
                        - addresses:
                            - addressLine1: 50 Hull Road
                              addressLine2: PAR
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 115
                              postcode: PL24 9DQ
                              town: ""
                              type: Primary
                          companyName: null
                          dob: "1975-10-05"
                          email: SimonMatthews@opgtest.com
                          firstname: Simon
                          id: 115
                          middlenames: null
                          salutation: Mr
                          surname: Matthews
                          systemStatus: true
                          uId: 7000-0000-1987
                      cancellationDate: null
                      caseAttorneyJointly: false
                      caseAttorneyJointlyAndJointlyAndSeverally: false
                      caseAttorneyJointlyAndSeverally: true
                      caseAttorneySingular: false
                      caseSubtype: pfa
                      certificateProviders:
                        - addresses:
                            - addressLine1: 69 Felix Lane
                              addressLine2: SHUSTOKE
                              addressLine3: ""
                              country: ""
                              county: ""
                              id: 114
                              postcode: B46 7EY
                              town: ""
                              type: Primary
                          dob: null
                          email: null
                          firstname: David
                          id: 114
                          middlenames: null
                          salutation: Mr
                          surname: Stewart
                          uId: 7000-0000-1979
                      dispatchDate: null
                      donor:
                        addresses:
                          - addressLine1: 71 Withers Close
                            addressLine2: ALLATHASDAL
                            addressLine3: ""
                            country: ""
                            county: ""
                            id: 53
                            postcode: HS9 2PN
                            town: ""
                            type: Primary
                        companyName: null
                        dob: "1948-11-01"
                        email: linkedpersonone@opgtest.com
                        firstname: Linked
                        id: 53
                        linked:
                          - id: 53
                            uId: 7000-0000-1334
                          - id: 59
                            uId: 7000-0000-1391
                          - id: 98
                            uId: 7000-0000-1813
                          - id: 110
                            uId: 7000-0000-1938
                        middlenames: Person
                        salutation: Mr
                        surname: One
                        uId: 7000-0000-1334
                      id: 21
                      invalidDate: null
                      lifeSustainingTreatment: null
                      lpaDonorSignatureDate: "2019-09-28"
                      lpaIsCleansed: false
                      onlineLpaId: null
                      receiptDate: "2014-09-26"
                      registrationDate: null
                      rejectedDate: null
                      replacementAttorneys: []
                      status: Pending
                      statusDate: null
                      trustCorporations: []
                      withdrawnDate: null
              schema:
                $ref: '#/components/schemas/LpaCollection'
          description: LPA details returned for the requested ID
          headers:
            Age:
              schema:
                type: integer
              description: |
                The time elapsed, measured in seconds, since the returned response body was retrieved from Sirius.
                Under normal circumstances this will be zero (0), indicating the response represents the current 'live' state within Sirius.
                In the case that the Gateway was unable to retrieve an up to date response from Sirius, it will make best efforts to return a cached version.
                It's up to the consumer of the API to determine if they wish to use a response based on its age.
        '404':
          description: An LPA with the passed ID Not Found
        '400':
          description: Bad request
        '403':
          description: Authentication failed
        '429':
          description: API Gateway throttling limit exceeded
        '500':
          description: Unhandeled internal exception within OPG Gateway
        '502':
          description: The Sirius data provider returned an exception
        '504':
          description: The Sirius data provider timed out
      tags:
        - "use-a-lpa"
      security:
        - sigv4: []
      x-amazon-apigateway-request-validator: "all"
      x-amazon-apigateway-integration:
        uri: arn:aws:apigateway:${region}:lambda:path/2015-03-31/functions/arn:aws:lambda:${region}:${account_id}:function:$${stageVariables.flask_app_name}/invocations
        responses:
          default:
            statusCode: "200"
        passthroughBehavior: "when_no_match"
        httpMethod: "POST"
        contentHandling: "CONVERT_TO_TEXT"
        type: "aws_proxy"
      parameters:
        - in: path
          name: uid
          schema:
            type: string
            pattern: '(^7\d{11}$|^(2|3)\d{6}$)'
          required: true
          description: Reference Number representing either an LPA Uid or a Meris Id
          examples:
            meris: 3000000
            lpauid: 700000000054
  /healthcheck:
    description: opg-data-lpa healthcheck
    get:
      summary: opg-data-lpa healthcheck
      description: Check if required services are available
      operationId: app.healthcheck
      tags:
        - "opg-data-lpa"
      security:
        - sigv4: []
      x-amazon-apigateway-request-validator: "all"
      x-amazon-apigateway-integration:
        uri: arn:aws:apigateway:${region}:lambda:path/2015-03-31/functions/arn:aws:lambda:${region}:${account_id}:function:$${stageVariables.flask_app_name}/invocations
        responses:
          default:
            statusCode: "200"
        passthroughBehavior: "when_no_match"
        httpMethod: "POST"
        contentHandling: "CONVERT_TO_TEXT"
        type: "aws_proxy"
      responses:
        200:
          description: opg-data-lpa healthcheck
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Healthcheck'
                  meta:
                    type: object
        400:
          description: Generic bad request (generally invalid syntax)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error400'
        401:
          description: Unauthorised (no current user and there should be)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error401'
        403:
          description: Forbidden - The current user is forbidden from accessing this data (in this way)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error403'
        404:
          description: That URL is not a valid route, or the item resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error404'
        500:
          description: Something unexpected happened and it is the API"s fault
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error500'
        503:
          description: Service Unavailable - please try again later
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error503'
  /lpa-online-tool/lpas/{lpa_online_tool_id}:
    get:
      security:
        - sigv4: []
      x-amazon-apigateway-request-validator: "all"
      x-amazon-apigateway-integration:
        uri: arn:aws:apigateway:${region}:lambda:path/2015-03-31/functions/arn:aws:lambda:${region}:${account_id}:function:$${stageVariables.flask_app_name}/invocations
        responses:
          default:
            statusCode: "200"
        passthroughBehavior: "when_no_match"
        httpMethod: "POST"
        contentHandling: "CONVERT_TO_TEXT"
        type: "aws_proxy"
      parameters:
        - in: path
          name: lpa_online_tool_id
          schema:
            type: string
            pattern: '^A\d{11}$'
          required: true
          description: Online Tool ID
          example: A12345678987
      responses:
        '200':
          description: LPA details returned for the requested ID
          headers:
            Age:
              schema:
                type: integer
              description: |
                The time elapsed, measured in seconds, since the returned response body was retrieved from Sirius.
                Under normal circumstances this will be zero (0), indicating the response represents the current 'live' state within Sirius.
                In the case that the Gateway was unable to retrieve an up to date response from Sirius, it will make best efforts to return a cached version.
                It's up to the consumer of the API to determine if they wish to use a response based on its age.
          content:
            application/json:
              schema:
                type: object
                required:
                  - cancellationDate
                  - invalidDate
                  - onlineLpaId
                  - receiptDate
                  - registrationDate
                  - rejectedDate
                  - status
                  - statusDate
                  - withdrawnDate
                  - dispatchDate
                properties:
                  cancellationDate:
                    type: string
                    format: date
                    nullable: true
                    description: The date the LPA was registered
                    example: '2018-06-30'
                  invalidDate:
                    type: string
                    format: date
                    nullable: true
                    description: The date the LPA was registered
                    example: '2018-06-30'
                  onlineLpaId:
                    type: string
                    example: A22486562341
                    pattern: '^A\d{11}$'
                  receiptDate:
                    type: string
                    format: date
                    description: The date the LPA was created
                    example: '2018-06-30'
                  rejectedDate:
                    type: string
                    format: date
                    nullable: true
                    description: The date the LPA was rejected
                    example: '2018-06-30'
                  registrationDate:
                    type: string
                    format: date
                    nullable: true
                    description: The date the LPA was registered
                    example: '2018-06-30'
                  statusDate:
                    type: string
                    format: date
                    nullable: true
                    description: The date the LPA's status was last changed
                    example: '2018-06-30'
                  withdrawnDate:
                    type: string
                    format: date
                    nullable: true
                    description: The date the LPA was withdrawn
                    example: '2018-06-30'
                  dispatchDate:
                    type: string
                    format: date
                    nullable: true
                    description: The date the LPA was dispatched
                    example: '2018-06-30'
                  status:
                    type: string
                    enum: [Cancelled, Imperfect, Invalid, Pending, Perfect, Rejected, Revoked, Withdrawn, Registered, Payment Pending, Return - unpaid]
        '404':
          description: An LPA with the passed ID Not Found
        '400':
          description: Bad request
        '403':
          description: Authentication failed
        '429':
          description: API Gateway throttling limit exceeded
        '500':
          description: Unhandeled internal exception within OPG Gateway
        '502':
          description: The Sirius data provider returned an exception
        '504':
          description: The Sirius data provider timed out
  /use-an-lpa/lpas/requestCode:
    post:
      tags:
        - "use-a-lpa"
      security:
        - sigv4: []
      x-amazon-apigateway-request-validator: "all"
      x-amazon-apigateway-integration:
        uri: arn:aws:apigateway:${region}:lambda:path/2015-03-31/functions/arn:aws:lambda:${region}:${account_id}:function:$${stageVariables.flask_app_name}/invocations
        responses:
          default:
            statusCode: "204"
        passthroughBehavior: "when_no_match"
        httpMethod: "POST"
        contentHandling: "CONVERT_TO_TEXT"
        type: "aws_proxy"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              oneOf:
                - $ref: "#/components/schemas/LetterRequest"
                - $ref: "#/components/schemas/LetterRequestWithCleanse"
            examples:
              request:
                summary: as letter request
                value:
                  case_uid: 700000000000
                  actor_uid: 700000000000
              cleanse:
                summary: as cleanse request
                value:
                  case_uid: 700000000000
                  notes: "Name: Example\nPostcode: EX4 MPL\nEmail: example@example.org"
      responses:
        '200':
          description: Letter was successfully enqueued or cleanse process started
          schema:
            type: object
            required:
              - queuedForCleansing
            properties:
              queuedForCleansing:
                type: boolean
                description: Whether the request was queued for cleansing
        '204':
          description: Letter was successfully enqueued
        '400':
          description: Invalid request
        '500':
          description: Unexpected error
openapi: '3.0.2'
info:
  title: lpa-${environment}
  version: '1.0'
  description: 'Rest API for LPA Data - ${environment}'
servers:
  - url: /v1
    description: we use the path only so we can use in different contexts
x-amazon-apigateway-request-validators:
  all:
    validateRequestParameters: true
    validateRequestBody: true
x-amazon-apigateway-gateway-responses:
  ACCESS_DENIED:
    responseTemplates:
      application/json: '{"errors": { "id": "$context.requestId", "code": "OPGDATA-API-FORBIDDEN", "title":$context.error.messageString, "detail":"Forbidden - The current user is forbidden from accessing this data (in this way)", "meta": {"x-ray": "$context.xrayTraceId"} }}'
  API_CONFIGURATION_ERROR:
    responseTemplates:
      application/json: '{"errors": { "id": "$context.requestId", "code": "OPGDATA-API-API_CONFIGURATION_ERROR", "title":$context.error.messageString, "detail": "", "meta": {"x-ray": "$context.xrayTraceId"} }}'
  AUTHORIZER_CONFIGURATION_ERROR:
    responseTemplates:
      application/json: '{"errors": { "id": "$context.requestId", "code": "OPGDATA-API-AUTHORIZER_CONFIGURATION_ERROR", "title":$context.error.messageString, "detail": "", "meta": {"x-ray": "$context.xrayTraceId"} }}'
  AUTHORIZER_FAILURE:
    responseTemplates:
      application/json: '{"errors": { "id": "$context.requestId", "code": "OPGDATA-API-AUTHORIZER_FAILURE", "title":$context.error.messageString, "detail": "", "meta": {"x-ray": "$context.xrayTraceId"} }}'
  BAD_REQUEST_BODY:
    responseTemplates:
      application/json: '{"errors": [{ "id": "$context.requestId", "code": "OPGDATA-API-INVALIDREQUEST", "title":$context.error.messageString, "detail":"$context.error.validationErrorString", "meta": {"x-ray": "$context.xrayTraceId"} }]}'
  BAD_REQUEST_PARAMETERS:
    responseTemplates:
      application/json: '{"errors": { "id": "$context.requestId", "code": "OPGDATA-API-BAD_REQUEST_PARAMETERS", "title":$context.error.messageString, "detail": "", "meta": {"x-ray": "$context.xrayTraceId"} }}'
  DEFAULT_4XX:
    responseTemplates:
      application/json: '{"errors": { "id": "$context.requestId", "code": "OPGDATA-API-INVALIDREQUEST", "title":$context.error.messageString, "detail": "", "meta": {"x-ray": "$context.xrayTraceId"} }}'
  DEFAULT_5XX:
    responseTemplates:
      application/json: '{"errors": { "id": "$context.requestId", "code": "OPGDATA-API-SERVERERROR", "title":$context.error.messageString, "detail":"Something unexpected happened internally", "meta": {"x-ray": "$context.xrayTraceId"} }}'
  EXPIRED_TOKEN:
    responseTemplates:
      application/json: '{"errors": { "id": "$context.requestId", "code": "OPGDATA-API-EXPIRED_TOKEN", "title":$context.error.messageString, "detail": "", "meta": {"x-ray": "$context.xrayTraceId"} }}'
  INTEGRATION_FAILURE:
    responseTemplates:
      application/json: '{"errors": { "id": "$context.requestId", "code": "OPGDATA-API-INTEGRATION_FAILURE", "title":$context.error.messageString, "detail": "", "meta": {"x-ray": "$context.xrayTraceId"} }}'
  INTEGRATION_TIMEOUT:
    responseTemplates:
      application/json: '{"errors": { "id": "$context.requestId", "code": "OPGDATA-API-INTEGRATION_TIMEOUT", "title":$context.error.messageString, "detail": "", "meta": {"x-ray": "$context.xrayTraceId"} }}'
  INVALID_API_KEY:
    responseTemplates:
      application/json: '{"errors": { "id": "$context.requestId", "code": "OPGDATA-API-INVALID_API_KEY", "title":$context.error.messageString, "detail": "", "meta": {"x-ray": "$context.xrayTraceId"} }}'
  INVALID_SIGNATURE:
    responseTemplates:
      application/json: '{"errors": { "id": "$context.requestId", "code": "OPGDATA-API-INVALID_SIGNATURE", "title":$context.error.messageString, "detail": "", "meta": {"x-ray": "$context.xrayTraceId"} }}'
  MISSING_AUTHENTICATION_TOKEN:
    responseTemplates:
      application/json: '{"errors": { "id": "$context.requestId", "code": "OPGDATA-API-MISSING_AUTHENTICATION_TOKEN", "title":$context.error.messageString, "detail": "", "meta": {"x-ray": "$context.xrayTraceId"} }}'
  QUOTA_EXCEEDED:
    responseTemplates:
      application/json: '{"errors": { "id": "$context.requestId", "code": "OPGDATA-API-QUOTA_EXCEEDED", "title":$context.error.messageString, "detail": "", "meta": {"x-ray": "$context.xrayTraceId"} }}'
  REQUEST_TOO_LARGE:
    responseTemplates:
      application/json: '{"errors": { "id": "$context.requestId", "code": "OPGDATA-API-FILESIZELIMIT", "title":$context.error.messageString, "detail":"Payload too large, try and upload in smaller chunks", "meta": {"x-ray": "$context.xrayTraceId"} }}'
  RESOURCE_NOT_FOUND:
    responseTemplates:
      application/json: '{"errors": { "id": "$context.requestId", "code": "OPGDATA-API-NOTFOUND", "title":$context.error.messageString, "detail":"That URL is not a valid route, or the item resource does not exist", "meta": {"x-ray": "$context.xrayTraceId"} }}'
  THROTTLED:
    responseTemplates:
      application/json: '{"errors": { "id": "$context.requestId", "code": "OPGDATA-API-THROTTLED", "title":$context.error.messageString, "detail": "", "meta": {"x-ray": "$context.xrayTraceId"} }}'
  UNAUTHORIZED:
    responseTemplates:
      application/json: '{"errors": { "id": "$context.requestId", "code": "OPGDATA-API-UNAUTHORISED", "title":$context.error.messageString, "detail":"Unauthorised (no current user and there should be)", "meta": {"x-ray": "$context.xrayTraceId"} }}'
  UNSUPPORTED_MEDIA_TYPE:
    responseTemplates:
      application/json: '{"errors": { "id": "$context.requestId", "code": "OPGDATA-API-MEDIA", "title":$context.error.messageString, "detail":"Unsupported media type for this endpoint", "meta": {"x-ray": "$context.xrayTraceId"} }}'
  WAF_FILTERED:
    responseTemplates:
      application/json: '{"errors": { "id": "$context.requestId", "code": "OPGDATA-API-WAF_FILTERED", "title":$context.error.messageString, "detail": "", "meta": {"x-ray": "$context.xrayTraceId"} }}'
"x-amazon-apigateway-policy": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Principal": {"AWS": []}, "Action": "execute-api:Invoke", "Resource": ["arn:aws:execute-api:eu-west-1:${account_id}:*/*/*/*"]}]}
components:
  securitySchemes:
    sigv4:
      type: "apiKey"
      name: "Authorization"
      in: "header"
      x-amazon-apigateway-authtype: "awsSigv4"
  schemas:
    Healthcheck:
      type: object
      properties:
        api-status:
          type: string
          example: "OK"
        sirius-status:
          type: string
          example: "OK"
        cache-status:
          type: string
          example: "OK"
    LetterRequest:
      type: object
      required:
        - case_uid
        - actor_uid
      properties:
        actor_uid:
          type: integer
        case_uid:
          type: integer
    LetterRequestWithCleanse:
      type: object
      required:
        - case_uid
        - notes
      properties:
        notes:
          type: string
          maxLength: 1000
        case_uid:
          type: integer
    LpaCollection:
      type: array
      minItems: 0
      items:
        $ref: '#/components/schemas/Lpa'
    Lpa:
      type: object
      required:
        - id
        - uId
        - applicationType
        - caseSubtype
        - receiptDate
        - rejectedDate
        - registrationDate
        - cancellationDate
        - invalidDate
        - withdrawnDate
        - dispatchDate
        - status
        - caseAttorneySingular
        - caseAttorneyJointlyAndSeverally
        - caseAttorneyJointly
        - caseAttorneyJointlyAndJointlyAndSeverally
        - applicationHasRestrictions
        - applicationHasGuidance
        - lpaDonorSignatureDate
        - lpaIsCleansed
        - lifeSustainingTreatment
        - onlineLpaId
        - attorneyActDecisions
        - donor
        - attorneys
        - replacementAttorneys
        - certificateProviders
        - trustCorporations
      properties:
        id:
          type: integer
        uId:
          type: string
          example: '7000-0000-0054'
          description: e.g. 7000-0000-0054
        applicationType:
          type: string
          enum: [Online, Classic]
        caseSubtype:
          type: string
          enum: [hw, pfa]
          minLength: 1
          maxLength: 3
        receiptDate:
          type: string
          format: date
          description: The date the LPA was created
          example: '2018-06-30'
        rejectedDate:
          type: string
          format: date
          description: The date the LPA was rejected
          example: '2018-06-30'
        registrationDate:
          type: string
          format: date
          description: The date the LPA was registered
          example: '2018-06-30'
        cancellationDate:
          type: string
          format: date
          description: The date the LPA was cancelled
          example: '2018-06-30'
        invalidDate:
          type: string
          format: date
          description: The date the LPA was marked invalid
          example: '2018-06-30'
        withdrawnDate:
          type: string
          format: date
          description: The date the LPA was withdrawn
          example: '2018-06-30'
        dispatchDate:
          type: string
          format: date
          description: The date the LPA was dispatched
          example: '2018-06-30'
        status:
          type: string
          enum: [Cancelled, Imperfect, Invalid, Pending, Perfect, Rejected, Revoked, Suspended, With COP, Withdrawn, Registered, Payment Pending]
          minLength: 1
          maxLength: 10
        caseAttorneySingular:
          type: boolean
        caseAttorneyJointlyAndSeverally:
          type: boolean
        caseAttorneyJointly:
          type: boolean
        caseAttorneyJointlyAndJointlyAndSeverally:
          type: boolean
        applicationHasRestrictions:
          type: boolean
        applicationHasGuidance:
          type: boolean
        lpaDonorSignatureDate:
          type: string
          format: date
          example: '2018-06-30'
        lpaIsCleansed:
          type: boolean
        lifeSustainingTreatment:
          type: string
          enum: ['Option A', 'Option B', null]
        onlineLpaId:
          type: string
          example: ABC123
        attorneyActDecisions:
          type: string
          enum: ['When Registered', 'Loss of capacity', null]
        donor:
          $ref: '#/components/schemas/Donor'
        attorneys:
          type: array
          items:
            $ref: '#/components/schemas/CaseActor'
        replacementAttorneys:
          type: array
          items:
            $ref: '#/components/schemas/CaseActor'
        trustCorporations:
          type: array
          items:
            $ref: '#/components/schemas/CaseActor'
        certificateProviders:
          type: array
          items:
            $ref: '#/components/schemas/CaseActor'
    Donor:
      allOf:
        - $ref: '#/components/schemas/CaseActor'
        - type: object
          required:
            - linked
          properties:
            linked:
              type: array
              items:
                type: object
                required:
                  - id
                  - uId
                properties:
                  id:
                    type: integer
                    description: The donor's database ID
                  uId:
                    type: string
                    example: '7000-0000-0054'
                    description: The donor's unique ID (e.g. 7000-0000-0054)
    CaseActor:
      type: object
      required:
        - id
        - uId
        - email
        - dob
        - salutation
        - firstname
        - middlenames
        - surname
        - companyName
        - systemStatus
        - addresses
      properties:
        id:
          type: integer
          description: The case actor's database ID
        uId:
          type: string
          example: '7000-0000-0054'
          description: The case actor's unique ID (e.g. 7000-0000-0054)
        email:
          type: string
          description: The case actor's contact email address
          maxLength: 255
        dob:
          type: string
          description: The case actor's date of birth
          example: '1980-10-10'
        salutation:
          type: string
          description: The case actor's salutation
          example: Mrs
        firstname:
          type: string
          description: The case actor's first name
          example: Ian
          maxLength: 255
        middlenames:
          type: string
          description: The case actor's last name
          example: Deputy
          maxLength: 255
        surname:
          type: string
          description: The case actor's last name
          example: Deputy
          maxLength: 255
        companyName:
          type: string
          description: The case actor's company name (if relevant)
          example: ABC Ltd
          maxLength: 255
        systemStatus:
          type: boolean
          description: The active/inactive status of the case actor
        addresses:
          type: array
          items:
            $ref: '#/components/schemas/Address'
    Address:
      required:
        - id
        - town
        - county
        - postcode
        - country
        - type
        - addressLine1
        - addressLine2
        - addressLine3
      properties:
        id:
          type: integer
          description: The address database ID
        town:
          type: string
          description: The town
          maxLength: 255
        county:
          type: string
          description: The county
          maxLength: 255
        postcode:
          type: string
          description: The postcode
          maxLength: 255
        country:
          type: string
          description: Address country
          example: UK
          maxLength: 255
        type:
          type: string
          description: Address type
          example: Primary
          enum: [Primary]
          maxLength: 7
        addressLine1:
          type: string
          description: The first line of the address
          maxLength: 255
        addressLine2:
          type: string
          description: The second line of the address
          maxLength: 255
        addressLine3:
          type: string
          description: The third line of the address
          maxLength: 255
    Error400:
      type: object
      required:
        - errors
      properties:
        errors:
          type: array
          items:
            type: object
            required:
              - code
              - title
            properties:
              id:
                type: string
                example: "A123BCD"
              code:
                type: string
                example: "OPGDATA-API-INVALIDREQUEST"
              title:
                type: string
                example: "Invalid Request"
              detail:
                type: string
                example: "Invalid request, the data is incorrect"
              meta:
                type: object
                properties:
                  x-ray:
                    type: string
                    example: "93c330d4-7d84-4c1b-8fdb-54cec5bfe747"
    Error401:
      type: object
      required:
        - errors
      properties:
        errors:
          type: array
          items:
            type: object
            required:
              - code
              - title
            properties:
              id:
                type: string
                example: "A123BCD"
              code:
                type: string
                example: "OPGDATA-API-UNAUTHORISED"
              title:
                type: string
                example: "User is not authorised"
              detail:
                type: string
                example: "Unauthorised (no current user and there should be)"
              meta:
                type: object
                properties:
                  x-ray:
                    type: string
                    example: "93c330d4-7d84-4c1b-8fdb-54cec5bfe747"
    Error403:
      type: object
      required:
        - errors
      properties:
        errors:
          type: array
          items:
            type: object
            required:
              - code
              - title
            properties:
              id:
                type: string
                example: "A123BCD"
              code:
                type: string
                example: "OPGDATA-API-FORBIDDEN"
              title:
                type: string
                example: "Access Denied"
              detail:
                type: string
                example: "Forbidden - The current user is forbidden from accessing this data (in this way)"
              meta:
                type: object
                properties:
                  x-ray:
                    type: string
                    example: "93c330d4-7d84-4c1b-8fdb-54cec5bfe747"
    Error404:
      type: object
      required:
        - errors
      properties:
        errors:
          type: array
          items:
            type: object
            required:
              - code
              - title
            properties:
              id:
                type: string
                example: "A123BCD"
              code:
                type: string
                example: "OPGDATA-API-NOTFOUND"
              title:
                type: string
                example: "Page not found"
              detail:
                type: string
                example: "That URL is not a valid route, or the item resource does not exist"
              meta:
                type: object
                properties:
                  x-ray:
                    type: string
                    example: "93c330d4-7d84-4c1b-8fdb-54cec5bfe747"
    Error413:
      type: object
      required:
        - errors
      properties:
        errors:
          type: array
          items:
            type: object
            required:
              - code
              - title
            properties:
              id:
                type: string
                example: "A123BCD"
              code:
                type: string
                example: "OPGDATA-API-FILESIZELIMIT"
              title:
                type: string
                example: "Payload too large"
              detail:
                type: string
                example: "Payload too large, try and upload in smaller chunks"
              meta:
                type: object
                properties:
                  x-ray:
                    type: string
                    example: "93c330d4-7d84-4c1b-8fdb-54cec5bfe747"
    Error415:
      type: object
      required:
        - errors
      properties:
        errors:
          type: array
          items:
            type: object
            required:
              - code
              - title
            properties:
              id:
                type: string
                example: "A123BCD"
              code:
                type: string
                example: "OPGDATA-API-MEDIA"
              title:
                type: string
                example: "Unsupported media type"
              detail:
                type: string
                example: "Unsupported media type for this endpoint"
              meta:
                type: object
                properties:
                  x-ray:
                    type: string
                    example: "93c330d4-7d84-4c1b-8fdb-54cec5bfe747"
    Error500:
      type: object
      required:
        - errors
      properties:
        errors:
          type: array
          items:
            type: object
            required:
              - code
              - title
            properties:
              id:
                type: string
                example: "A123BCD"
              code:
                type: string
                example: "OPGDATA-API-SERVERERROR"
              title:
                type: string
                example: "Internal server error"
              detail:
                type: string
                example: "Something unexpected happened internally"
              meta:
                type: object
                properties:
                  x-ray:
                    type: string
                    example: "93c330d4-7d84-4c1b-8fdb-54cec5bfe747"
    Error503:
      type: object
      required:
        - errors
      properties:
        errors:
          type: array
          items:
            type: object
            required:
              - code
              - title
            properties:
              id:
                type: string
                example: "A123BCD"
              code:
                type: string
                example: "OPGDATA-API-UNAVAILABLE"
              title:
                type: string
                example: "Service Unavailable"
              detail:
                type: string
                example: "Service is currently unavailable. Please try again later"
              meta:
                type: object
                properties:
                  x-ray:
                    type: string
                    example: "93c330d4-7d84-4c1b-8fdb-54cec5bfe747"
